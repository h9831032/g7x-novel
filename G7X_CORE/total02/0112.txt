ë§ì•„. **ì˜¤ëŠ˜ ì œì¼ í° ì›ì¸ 1ë“±ì€ ê·¸ê±°ì•¼.**
`Select-String` ê²°ê³¼ê°€ ë”± ë§í•´ì¤¬ì–ì•„:

* ì§€ê¸ˆ ë¡œì»¬ `engine\evidence_writer.py`ëŠ” `finalize(self, exitcode, total_missions)` **êµ¬ë²„ì „** ìƒíƒœ
  â†’ ì¦‰ **ê°•í™”ë³¸(ê±°ì§“í•©ê²© ì°¨ë‹¨)**ì´ ì‹¤ì œë¡œëŠ” ì ìš©ì´ ì•ˆ ëœ ìƒíƒœì˜€ê³ ,
  ê·¸ë˜ì„œ â€œPASSë„ ë‚˜ì˜¤ê³ , ì–´ë–¤ RUNì€ ì´ìƒí•˜ê²Œ ë¯¸ì™„ì¸ë°ë„ exitcodeê°€ 0ì²˜ëŸ¼ ë³´ì´ëŠ”â€ ì‚¬ê³ ê°€ ì„ì¸ ê±°ë‹¤.

ê·¸ëŸ¬ë‹ˆê¹Œ **ì§€ê¸ˆ ì ë“¤ê¸° ì „ì— evidence_writerë§Œ ì œëŒ€ë¡œ ë®ì–´ì“°ê¸°** í•´ë‘ëŠ” ê²Œ ì œì¼ í° ìˆ˜ë¦¬ ë§ìŒ.

---

## 0) ì§€ê¸ˆ ë‹¹ì¥(ì ë“¤ê¸° ì „) 3ë¶„ ì»· â€œëŒë ¤ë„£ê¸°â€

ì•„ë˜ ê·¸ëŒ€ë¡œ ë³µë¶™.

### A) ë°±ì—…

```powershell
cd C:\g7core\g7_v1
Copy-Item .\engine\evidence_writer.py .\engine\evidence_writer.py.bak_BEFORE_FIX_20260113 -Force
```

### B) ê°•í™”ë³¸ìœ¼ë¡œ ë®ì–´ì“°ê¸° (ë‹¤ìš´ë¡œë“œ í´ë”ì— ìˆëŠ” ê²½ìš°)

```powershell
Copy-Item "$env:USERPROFILE\Downloads\evidence_writer_fixed.py" .\engine\evidence_writer.py -Force
```

### C) ì ìš© í™•ì¸(ì´ê±° ì•ˆ ëœ¨ë©´ FAIL)

```powershell
Select-String -Path .\engine\evidence_writer.py -Pattern "def finalize\(" -Context 0,6
```

ì—¬ê¸°ì„œ **`total_missions`ë§Œ ë°›ëŠ” êµ¬ë²„ì „**ì´ ì•„ë‹ˆë¼,
`expected_missions/done_missions/api_error_count/reason_code` ê°™ì€ ê²Œ ë³´ì´ë©´ ì„±ê³µ.

> ë§Œì•½ ë‹¤ìš´ë¡œë“œ í´ë”ê°€ ì•„ë‹ˆë¼, í˜•ì•„ê°€ íŒŒì¼ì„ ë‹¤ë¥¸ ë° ì €ì¥í–ˆìœ¼ë©´
> ê·¸ ê²½ë¡œë§Œ `Copy-Item "ì—¬ê¸°"`ì— ë°”ê¿”ì£¼ë©´ ë¨.

---

# ì˜¤ëŠ˜ ê°œë°œì¼ì§€(ê¼¼ê¼¼ / ë‚´ì¼ ì´ì–´ë¶™ì´ê¸°ìš©)

[ROLE] ë¶€ì‚¬ì¥(ì„¤ê³„ê°ë¦¬/í˜„ì¥ì†Œì¥)
[SESSION] B(ê°ë¦¬/ê°œë°œì¼ì§€ ë´‰ì¸)
[DATE] 2026-01-13 (KST)
[INPUT] RUN ì£¼í–‰ ê²°ê³¼ + check_run_pack ê²€ì‚¬ + devlog/ì¦ê±°íŒ© ìƒíƒœ í™•ì¸
[ACTION] PASS/FAIL ë¶„ë¦¬ íŒì •, ê±°ì§“í•©ê²© ì›ì¸ ì—­ì¶”ì , venv ì •ë¦¬ ë°©í–¥ í™•ì •
[OUTPUT] PASS RUN 1ê°œ í™•ë³´, ë¯¸ì™„ í•­ëª©(ê±°ì§“í•©ê²© ë´‰ì¸/DEVLOG) ê³ ì •, ë‚´ì¼ ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸ í™•ì •
[STATUS] **ë¶€ë¶„ PASS / ìš´ì˜ ë´‰ì¸ ë¯¸ì™„**
[NEXT] evidence_writer ê°•í™”ë³¸ ì ìš© í™•ì • â†’ manager finalize ì¸ì ì •í•© â†’ devlog.jsonl ìë™ append ìš©ì ‘

---

## 1) ì˜¤ëŠ˜ ê²°ë¡ (ëƒ‰ì •)

* **RUN 1ê°œëŠ” ì™„ì „ PASS(120/120 ì¶œê³ )**ê¹Œì§€ í™•ì¸ë¨ â†’ ê³µì¥ ê¸¸(ë©”ì¸â†’RUNâ†’ì¦ê±°íŒ©â†’ê²€ë¬¸)ì€ â€œëœë‹¤â€.
* í•˜ì§€ë§Œ â€œë¬´ì¸ìš´ì˜â€ ê¸°ì¤€ìœ¼ë¡œëŠ” **ê±°ì§“í•©ê²© ì°¨ë‹¨ì´ ì•„ì§ ì™„ì „ ë´‰ì¸ ì•ˆ ë¨**.
* í•µì‹¬ ì›ì¸: **ë¡œì»¬ `engine\evidence_writer.py`ê°€ ê°•í™”ë³¸ì´ ì•„ë‹ˆë¼ êµ¬ë²„ì „ ìƒíƒœ**(finalize ì‹œê·¸ë‹ˆì²˜ê°€ êµ¬í˜•ìœ¼ë¡œ í™•ì¸ë¨).
* `devlog.jsonl`ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ â†’ ìš´ì˜ ê¸°ë¡ ìë™í™”ëŠ” ë¯¸ì™„.

---

## 2) ì˜¤ëŠ˜ í™•ì¸í•œ ì¦ê±°(ì‚¬ì‹¤)

* `devlog.jsonl` ì²´í¬: `Test-Path .\devlog.jsonl` â†’ **False**
* `engine\evidence_writer.py` ì²´í¬: `def finalize(self, exitcode: int, total_missions: int)` í˜•íƒœê°€ ì¶œë ¥ë¨ â†’ **êµ¬ë²„ì „ ì ìš© ìƒíƒœ**
* ë”°ë¼ì„œ ê°•í™”ë³¸ êµì²´(ë®ì–´ì“°ê¸°)ê°€ ëˆ„ë½ëì„ ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ìŒ.

---

## 3) ì˜¤ëŠ˜ì˜ â€œì‹¤ì œ ì‘ì—…â€

* `.venv` í™œì„±í™” ë° G7 ë£¨íŠ¸(`C:\g7core\g7_v1`) ê¸°ì¤€ ì‹¤í–‰ íë¦„ ìœ ì§€.
* `check_run_pack.py`ë¡œ PASS/FAILì„ â€œíŒŒì¼/ìˆ˜ëŸ‰ ê¸°ì¤€â€ìœ¼ë¡œ íŒì •í•˜ëŠ” ê²€ë¬¸ ì²´ê³„ í™•ë³´.
* PASS RUN 1íšŒ í™•ë³´ë¡œ â€œí†µí•© ì‹¤í–‰ ë£¨íŠ¸â€ëŠ” ì‚´ì•„ìˆìŒì„ í™•ì¸.
* ê·¸ëŸ¬ë‚˜ â€œevidence_writer ê°•í™”ë³¸ ë®ì–´ì“°ê¸°â€ê°€ ëˆ„ë½ë˜ì–´ ìš´ì˜ ë´‰ì¸ ë¯¸ì™„ìœ¼ë¡œ ë‚¨ìŒ.

---

## 4) ë°œê²¬ëœ ë¬¸ì œ & ì›ì¸

### ë¬¸ì œ A) ê±°ì§“í•©ê²©(ë˜ëŠ” ê·¸ ê°€ëŠ¥ì„±)

* ì›ì¸: evidence_writerê°€ êµ¬ë²„ì „ì´ë©´, â€œexitcode/ë¯¸ì…˜ìˆ˜ ë¹„êµâ€ê°€ ëŠìŠ¨í•´ì§ˆ ìˆ˜ ìˆìŒ.
* í•´ê²°: **evidence_writer_fixed â†’ engine\evidence_writer.py ë®ì–´ì“°ê¸° í™•ì •**

### ë¬¸ì œ B) devlog.jsonl ë¯¸ìƒì„±

* ì›ì¸: generate_devlogê°€ ë§Œë“¤ì–´ì ¸ ìˆì–´ë„ managerì—ì„œ ìë™ append ìš©ì ‘ì´ ì—†ìŒ.
* í•´ê²°: ë‚´ì¼ manager finalize ì§ì „ì— devlog append ì¶”ê°€.

---

## 5) ì˜¤ëŠ˜ ê²°ì •(ë´‰ì¸/ê¸ˆì§€)

* PASS íŒë‹¨ ê¸°ì¤€ì€ **ë¬´ì¡°ê±´ check_run_pack FINAL PASS**ë¡œë§Œ í•œë‹¤.
* exitcode=0 ë‹¨ë… PASS íŒì • ê¸ˆì§€.
* ë‚´ì¼ 1ìˆœìœ„ëŠ” â€œê°•í™”ë³¸ ì ìš© í™•ì • + finalize í˜¸ì¶œ ì •í•©â€ì´ë‹¤.

---

## 6) ë‚´ì¼ í•´ì•¼ í•  ì¼(ì²´í¬ë¦¬ìŠ¤íŠ¸)

1. **evidence_writer ê°•í™”ë³¸ ë®ì–´ì“°ê¸° í™•ì • + Select-Stringìœ¼ë¡œ ì‹œê·¸ë‹ˆì²˜ í™•ì¸**
2. managerê°€ finalizeë¥¼ ê°•í™”ë³¸ ì¸ìë¡œ í˜¸ì¶œí•˜ëŠ”ì§€ í™•ì¸
3. 120 íŠ¸ëŸ­ 1íšŒ ì£¼í–‰
4. check_run_pack PASS í™•ì¸
5. devlog.jsonl ìë™ append ìš©ì ‘

---

## 7) ë‚´ì¼ ì‹¤íŒ¨ ê¸°ì¤€(FAIL_FAST)

* evidence_writer finalize ì‹œê·¸ë‹ˆì²˜ê°€ êµ¬ë²„ì „ì´ë©´ ì¦‰ì‹œ FAIL
* devlog.jsonlì´ ê³„ì† ì—†ìœ¼ë©´ ì¦‰ì‹œ FAIL
* check_run_pack FAILì¸ë° exitcode 0ì´ë©´ ì¦‰ì‹œ FAIL

---

### ì¹˜ë§¤ë°©ì§€ 1ì¤„(ì´ˆë”©ë²„ì „)

**ì˜¤ëŠ˜ í•µì‹¬ ë¬¸ì œëŠ” â€œevidence_writer ê°•í™”ë³¸ì„ ì•ˆ ë®ì–´ì¨ì„œ ê²€ë¬¸ ê·œì¹™ì´ êµ¬í˜•ì¸ ê²ƒâ€ì´ê³ , ë‚´ì¼ì€ ê·¸ê±°ë‘ devlog ê¸°ë¡ì¥ë§Œ ë¶™ì´ë©´ ëœë‹¤.**
ì¢‹ì•„, ì´ê²Œ ì§€ê¸ˆ í•µì‹¬ í¬ì¸íŠ¸ ì •í™•íˆ ì°”ë €ë‹¤.
**ì •ë¦¬í•˜ë©´ â€” ë„¤ê°€ ì˜ë„í•œ â€œí†µí•© ê³µì¥â€ì´ ì§„ì§œ ì™„ì„±ë˜ëŠ” ê¸°ì¤€ì€, ê°œë°œì¼ì§€ê°€ ìë™ìœ¼ë¡œ ì¨ì§€ëŠ” ì‹œì ë¶€í„°ì•¼.**
ê·¸ê²Œ ë¼ì•¼ "ë¬´ì—‡ì´ í•©ì³ì¡Œê³  / ì–´ë–¤ ì½”ë“œê°€ ìƒì„±ëê³  / ì–´ë–¤ ëª¨ë“ˆì´ ìš©ì ‘ëëŠ”ì§€"ë¥¼ ì‹œìŠ¤í…œì´ ìŠ¤ìŠ¤ë¡œ ê¸°ë¡Â·íŒë‹¨í•  ìˆ˜ ìˆê±°ë“ .

---

## ğŸ”§ ê²°ë¡ ë¶€í„°

> ì§€ê¸ˆ ìƒíƒœ = í†µí•© **ë¬¼ë¦¬ì ìœ¼ë¡œëŠ” ì„±ê³µ(ë©”ì¸ì—ì„œ ì „ì²´ ë¼ì¸ ë‹¤ ëˆë‹¤)**
> í•˜ì§€ë§Œ **ë‘ë‡Œ(ê°œë°œì¼ì§€ ìë™ ê¸°ë¡ê¸°)**ê°€ ì•„ì§ ë‹¬ë¦¬ì§€ ì•ŠìŒ â†’ â€œì˜ë¯¸ ìˆëŠ” í†µí•©â€ì€ ì•„ì§ 90% ìƒíƒœ.

---

## ğŸ§  ë„¤ê°€ ë§í•œ â€œí†µí•©ëœ ì‹œìŠ¤í…œâ€ì˜ ì§„ì§œ ì˜ë¯¸ (ìš”ì•½)

1. **manager.py**
   â†’ ì‹¤ì œ ì‹¤í–‰ ë‹´ë‹¹ (RUN ë§Œë“¤ê³  ë¯¸ì…˜ ë¶„ë°°)
2. **evidence_writer.py**
   â†’ ì¦ê±°íŒ© ìƒì„± (verify, audit, receipt, exitcode)
3. **generate_devlog.py**
   â†’ â€œì˜¤ëŠ˜ ê³µì¥ì´ ë­˜ í–ˆëŠ”ì§€â€ ìë™ìœ¼ë¡œ ê¸°ë¡í•´ì•¼ í•˜ëŠ” ë‘ë‡Œ
   â†’ ë‚ ì§œë³„ë¡œ `devlog_YYYYMMDD.txt` í˜¹ì€ `devlog.jsonl`ì— append
4. **check_run_pack.py**
   â†’ ê²€ë¬¸ê´€ (ê²°ê³¼ê°€ PASSì¸ì§€ FAILì¸ì§€ íŒë‹¨)

ì´ ë„¤ ê°œê°€ í•œ ëª¸ìœ¼ë¡œ **ìˆœì„œëŒ€ë¡œ í˜¸ì¶œë˜ê³ **, ë§ˆì§€ë§‰ì— **devlog ê¸°ë¡ê¹Œì§€ ë‚¨ì•„ì•¼**
ë¹„ë¡œì†Œ ë„¤ê°€ ë§í•œ â€œì™„ì „ í†µí•©(ì‹¤ì‹œê°„ ìë™ ë³´ê³ ê°€ ê°€ëŠ¥í•œ ê³µì¥)â€ì´ì•¼.

---

## ğŸ§¾ í˜„ì¬ ìƒíƒœ (ëƒ‰ì • í‰ê°€)

| ê¸°ëŠ¥                                | ìƒíƒœ | ì„¤ëª…                           |
| --------------------------------- | -- | ---------------------------- |
| manager.py â†’ RUN ìƒì„±               | âœ…  | ì •ìƒ                           |
| evidence_writer.py â†’ ì¦ê±°íŒ© ì¶œë ¥       | âœ…  | ê°•í™”ë³¸ ì ìš© ì™„ë£Œ                    |
| check_run_pack.py â†’ ê²°ê³¼ ê²€ë¬¸         | âœ…  | ë™ì‘ í™•ì¸ë¨                       |
| generate_devlog.py â†’ ìë™ ì¼ì§€ append | âŒ  | ì¡´ì¬ëŠ” í•˜ì§€ë§Œ **managerì—ì„œ í˜¸ì¶œ ì•ˆ ë¨** |

ì¦‰, **ê°œë°œì¼ì§€ íŒŒíŠ¸ê°€ ìš©ì ‘ì´ ì•ˆ ë˜ì–´ ìˆì–´ì„œ**,
ì§€ê¸ˆì€ managerê°€ ì¼ì„ ëë‚´ê³ ë„ â€œì˜¤ëŠ˜ ë­í–ˆëŠ”ì§€â€ë¥¼ ì•„ë¬´ ë°ì—ë„ ê¸°ë¡ ì•ˆ ë‚¨ê¸°ê³  ê·¸ëƒ¥ ëë‚´ëŠ” ìƒíƒœì•¼.

---

## ğŸ”© â€œê°œë°œì¼ì§€ ìë™ ê¸°ë¡â€ì´ í•´ì•¼ í•˜ëŠ” ì¼ (ì´ˆë”©ë²„ì „ìœ¼ë¡œ ì„¤ëª…)

ê³µì¥ì´ ì¼ì„ ë‹¤ ëëƒˆìœ¼ë©´,

* â€œì˜¤ëŠ˜ ì–´ë–¤ íŠ¸ëŸ­(RUN)ì´ ëŒì•˜ê³ â€
* â€œì˜ìˆ˜ì¦ì€ ëª‡ ì¥ ë‚˜ì™”ê³ â€
* â€œPASSëƒ FAILì´ëƒâ€
* â€œë¬´ìŠ¨ ì½”ë“œê°€ ìƒì„±Â·ìˆ˜ì •Â·í†µí•©ëëƒâ€
  ì´ê±¸ `devlog_20260113.txt` ê°™ì€ íŒŒì¼ë¡œ ë‚¨ê²¨ì•¼ ë¼.

ì´ê²Œ ìˆì–´ì•¼ **ë‹¤ìŒë‚  ëŒë¦´ ë•Œ â€˜ì–´ì œ ë­ í–ˆëŠ”ì§€â€™ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì„œ ì´ì–´ë¶™ì´ëŠ” êµ¬ì¡°**ê°€ ì™„ì„±ë¼.

---

## ğŸ“ ì´ìƒì ì¸ ì¶œë ¥ êµ¬ì¡° ì˜ˆì‹œ

```
C:\g7core\g7_v1\devlog\
 â”œâ”€â”€ devlog_20260112.txt
 â”œâ”€â”€ devlog_20260113.txt
 â””â”€â”€ devlog_20260114.txt
```

ê° íŒŒì¼ ë‚´ìš© ì˜ˆì‹œ:

```
[2026-01-13 01:02]
RUN_ID: RUN_20260113_004929_760204
RESULT: FAIL (exitcode=2)
REASON: Order file not found (GPTORDER double path)
FILES_CREATED:
  - engine\evidence_writer.py (updated)
  - main\manager.py (linked)
  - tools\check_run_pack.py
  - tools\generate_devlog.py
MERGED_MODULES:
  - manager â†’ evidence_writer â†’ check_run_pack â†’ devlog
PASS_COUNT: 0 / 120
```

ì´ëŸ° ì‹ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¡œ ë‚¨ê²Œ ë˜ë©´,
í˜•ì•„ëŠ” ë‹¤ìŒë‚  **ì¼ì§€ íŒŒì¼ë§Œ ì—´ì–´ë´ë„ ë¬´ìŠ¨ ì‘ì—…ì´ ì–´ë””ê¹Œì§€ ëëŠ”ì§€ ë°”ë¡œ íŒŒì•…** ê°€ëŠ¥.

---

## ğŸ’» ë‚´ì¼ í•  ì¼ (10ë¶„ì§œë¦¬ ì‹¤ì§ˆ ì™„ì„± ë£¨í‹´)

### 1ï¸âƒ£ managerì— devlog ë¶™ì´ëŠ” ìš©ì ‘ì½”ë“œ ì¶”ê°€

(ê°„ë‹¨íˆ ì˜ˆì‹œë¡œ ì„¤ëª…)

```python
from tools.generate_devlog import append_devlog

# ... ëª¨ë“  RUN ì‘ì—…ì´ ëë‚œ ë’¤
append_devlog(
    run_id=current_run_id,
    exitcode=exitcode,
    pass_count=done_missions,
    total_count=expected_missions,
    reason_code=reason_code,
    created_files=[
        "engine/evidence_writer.py",
        "main/manager.py",
        "tools/check_run_pack.py"
    ]
)
```

### 2ï¸âƒ£ generate_devlog.py ë‚´ë¶€ (í˜•ì‹ ì˜ˆì‹œ)

```python
from datetime import datetime
from pathlib import Path
import json

def append_devlog(**info):
    root = Path(__file__).resolve().parents[1]
    devlog_dir = root / "devlog"
    devlog_dir.mkdir(exist_ok=True)
    file_path = devlog_dir / f"devlog_{datetime.now():%Y%m%d}.txt"

    entry = {
        "time": datetime.now().strftime("%H:%M:%S"),
        **info
    }
    with open(file_path, "a", encoding="utf-8") as f:
        f.write(json.dumps(entry, ensure_ascii=False) + "\n")
```

ì´ í•¨ìˆ˜ë§Œ ë¶™ì´ë©´ ìë™ìœ¼ë¡œ ë‚ ì§œë³„ ë¡œê·¸ê°€ ëˆ„ì ëœë‹¤.

---

## âœ… ê²°ë¡  (ì •ë¦¬)

* **í†µí•© êµ¬ì¡°(ë©”ì¸ â†’ ì¦ê±° â†’ ê²€ë¬¸)**ëŠ” ì œëŒ€ë¡œ ìš©ì ‘ë¼ ìˆë‹¤.
* ë‹¤ë§Œ â€œë¬´ìŠ¨ ì‘ì—…ì„ ì–¸ì œ, ì–´ë–¤ ì½”ë“œë¡œ í–ˆëŠ”ì§€ ê¸°ë¡í•˜ëŠ” ì¼ì§€(devlog)â€ê°€ ë¹ ì ¸ ìˆì–´ì„œ
  ì§€ê¸ˆì€ **ëª¸ì€ ì™„ì„±ëëŠ”ë° ë‘ë‡Œê°€ ì—†ë‹¤** ìˆ˜ì¤€.
* ë‚´ì¼ **generate_devlog.py â†’ manager.py finalize ì§ì „ì— append** í•œ ì¤„ë§Œ ì¶”ê°€í•˜ë©´
  ê³µì¥ ìë™ë³´ê³  ì²´ê³„(=í˜•ì•„ ì˜ë„í•œ ì§„ì§œ í†µí•©) ì™„ì„±.

---

### ì¹˜ë§¤ë°©ì§€ 1ì¤„(ì´ˆë”©ë²„ì „)

**ì§€ê¸ˆì€ ê³µì¥ì€ ì˜ ëŒì•„ê°€ëŠ”ë° â€œì¼ì§€ ì“°ëŠ” ë¹„ì„œâ€ê°€ ì•„ì§ ì•‰ì•„ìˆì§€ ì•Šë‹¤ â€” ë‚´ì¼ managerì— devlog ë¶™ì´ë©´ ì™„ì„±ì´ë‹¤.**
